#  OTGW Logger & Monitor (Ampera/Laxilef Edition)

–£–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è –∫–æ—Ç–ª–æ–≤ **Baxi Ampera Pro** (–∏ –∞–Ω–∞–ª–æ–≥–æ–≤) —á–µ—Ä–µ–∑ —à–ª—é–∑ **OpenTherm Gateway** —Å –ø—Ä–æ—à–∏–≤–∫–æ–π **Laxilef**.

–°–∫—Ä–∏–ø—Ç –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π OpenTherm, —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ª–æ–≥–∏ –¥–∞—Ç—á–∏–∫–æ–≤ Laxilef, MQTT-–∫–æ–Ω—Ç–µ–∫—Å—Ç) –≤ –µ–¥–∏–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö Telegram –¥–ª—è Home Assistant –æ—à–∏–±–∫–∞.

##  –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1.  **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ (v3.22):**
    * –ü–æ–Ω–∏–º–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ OpenTherm ID (HEX).
    * –ß–∏—Ç–∞–µ—Ç –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏ –∏–∑ –ª–æ–≥–æ–≤ Laxilef (–Ω–∞–ø—Ä–∏–º–µ—Ä, `'Heating return temp'`).
    * **Context Aware:** –†–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –±–µ–∑—ã–º—è–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è `{"value": ...}` –≤ MQTT, —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—è –∏—Ö —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–æ–∫–æ–π —Ç–æ–ø–∏–∫–∞.
2.  **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Home Assistant:**
    * –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—à–∏–±–∫—É –≤ MQTT.
    * –ü—É–±–ª–∏–∫—É–µ—Ç —Å—Ç–∞—Ç—É—Å—ã –æ—à–∏–±–æ–∫ –∏ –∞–≤–∞—Ä–∏–π.
3.  **Telegram –ë–æ—Ç:**
    *  –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∞–≤–∞—Ä–∏—è—Ö (—Å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–æ–π –∫–æ–¥–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä `17` -> `E9`).
    *  –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–∞–¥–µ–Ω–∏–∏ (<0.7) –∏–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ (>2.8) –¥–∞–≤–ª–µ–Ω–∏—è.
    *  –ï–∂–µ—á–∞—Å–Ω—ã–π –æ—Ç—á–µ—Ç —Å –ø–æ–ª–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º—ã (–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, –ú–æ–¥—É–ª—è—Ü–∏—è, –û—à–∏–±–∫–∏).
4.  **–ü–∞—Å—Å–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º:** –ù–µ –Ω–∞–≥—Ä—É–∂–∞–µ—Ç —à–ª—é–∑ –∑–∞–ø—Ä–æ—Å–∞–º–∏, —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è (—Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ ESP8266/WiFi).

##  –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

* `compose.yaml` ‚Äî –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker Compose.
* `.env` ‚Äî –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ü–∞—Ä–æ–ª–∏, IP, –¢–æ–∫–µ–Ω—ã).
* `Dockerfile` ‚Äî –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞.
* `requirements.txt` ‚Äî –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python.
* `logger.py` ‚Äî –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ª–æ–≥–∏–∫–∏.

##  –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
  ```bash
git clone [https://github.com/chubaise/otgw-logger.git](https://github.com/chubaise/otgw-logger.git)
cd otgw-logger
```
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env (–∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ env.example –µ—Å–ª–∏ –µ—Å—Ç—å) –∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ: 
  ```bash
  # .env —Ñ–∞–π–ª
  OTGW_IP=192.168.1.50
  OTGW_PORT=23

  MQTT_BROKER=192.168.1.111
  MQTT_PORT=1883
  # MQTT_USER=user
  # MQTT_PASS=pass
  MQTT_TOPIC_ERROR=otgw/error

  TG_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
  TG_CHAT_ID=123456789
```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
  ```bash
  docker compose up -d --build

üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –ª–æ–≥–∞—Ö –ø–æ—è–≤–ª—è—é—Ç—Å—è –∑–µ–ª–µ–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ ‚úÖ UPDATE: ....
–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ Connection lost, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ IP –∞–¥—Ä–µ—Å —à–ª—é–∑–∞ –∏ —Ä–∞–±–æ—Ç—É WiFi.
  ```bash
  docker compose logs -f
```






  
